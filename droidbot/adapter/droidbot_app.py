import logging
import socket
import subprocess
import time
import json
import struct
import traceback
from .adapter import Adapter

DROIDBOT_APP_REMOTE_ADDR = "tcp:7336"
DROIDBOT_APP_PACKAGE = "io.github.ylimit.droidbotapp"
DROIDBOT_APP_PACKET_HEAD_LEN = 6
ACCESSIBILITY_SERVICE = DROIDBOT_APP_PACKAGE + "/io.github.privacystreams.accessibility.PSAccessibilityService"
MAX_NUM_GET_VIEWS = 5
GET_VIEW_WAIT_TIME = 1


class DroidBotAppConnException(Exception):
    """
    Exception in telnet connection
    """
    pass


class EOF(Exception):
    """
    Exception in telnet connection
    """
    pass


class DroidBotAppConn(Adapter):
    """
    a connection with droidbot app.
    """

    def __init__(self, device=None):
        """
        initiate a droidbot app connection
        :param device: instance of Device
        :return:
        """
        self.logger = logging.getLogger(self.__class__.__name__)
        self.host = "localhost"
        if device is None:
            from droidbot.device import Device
            device = Device()
        self.device = device
        self.port = self.device.get_random_port()
        self.connected = False
        self.__can_wait = True

        self.sock = None
        self.last_acc_event = None
        self.enable_accessibility_hard = device.enable_accessibility_hard
        self.ignore_ad = device.ignore_ad
        if self.ignore_ad:
            import re
            self.__first_cap_re = re.compile("(.)([A-Z][a-z]+)")
            self.__all_cap_re = re.compile("([a-z0-9])([A-Z])")

    def __id_convert(self, name):
        name = name.replace(".", "_").replace(":", "_").replace("/", "_")
        s1 = self.__first_cap_re.sub(r"\1_\2", name)
        return self.__all_cap_re.sub(r"\1_\2", s1).lower()

    def set_up(self):
        device = self.device
        if DROIDBOT_APP_PACKAGE in device.adb.get_installed_apps():
            self.logger.debug("DroidBot app was already installed.")
        else:
            # install droidbot app
            try:
                import pkg_resources
                droidbot_app_path = pkg_resources.resource_filename("droidbot", "resources/droidbotApp.apk")
                install_cmd = ["install", droidbot_app_path]
                self.device.adb.run_cmd(install_cmd)
                self.logger.debug("DroidBot app installed.")
            except Exception:
                self.logger.warning("Failed to install DroidBotApp.")
                traceback.print_exc()

        # device.adb.disable_accessibility_service(ACCESSIBILITY_SERVICE)
        device.adb.enable_accessibility_service(ACCESSIBILITY_SERVICE)

        if ACCESSIBILITY_SERVICE not in device.get_service_names() \
                and self.device.get_sdk_version() < 23 and self.enable_accessibility_hard:
            device.adb.enable_accessibility_service_db(ACCESSIBILITY_SERVICE)
            while ACCESSIBILITY_SERVICE not in device.get_service_names():
                print("Restarting device...")
                time.sleep(1)

        # device.start_app(droidbot_app)
        while ACCESSIBILITY_SERVICE not in device.get_service_names() and self.__can_wait:
            print("Please enable accessibility for DroidBot app manually.")
            time.sleep(1)

    def tear_down(self):
        self.device.uninstall_app(DROIDBOT_APP_PACKAGE)

    def connect(self):
        self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        try:
            # forward host port to remote port
            serial_cmd = "" if self.device is None else "-s " + self.device.serial
            forward_cmd = "adb %s forward tcp:%d %s" % (serial_cmd, self.port, DROIDBOT_APP_REMOTE_ADDR)
            subprocess.check_call(forward_cmd.split())
            self.sock.connect((self.host, self.port))
            import threading
            listen_thread = threading.Thread(target=self.listen_messages)
            listen_thread.start()
        except socket.error:
            self.connected = False
            traceback.print_exc()
            raise DroidBotAppConnException()

    def sock_read(self, rest_len):
        buf = None
        while rest_len:
            pkt = self.sock.recv(rest_len)
            if not pkt:
                raise EOF()
            if not buf:
                buf = pkt
            else:
                buf += pkt
            rest_len -= len(pkt)
        return buf

    def read_head(self):
        header = self.sock_read(DROIDBOT_APP_PACKET_HEAD_LEN)
        data = struct.unpack(">BBI", header)
        return data

    def listen_messages(self):
        self.logger.debug("start listening messages")
        self.connected = True
        try:
            while self.connected:
                _, _, message_len = self.read_head()
                message = self.sock_read(message_len)
                # print(f"self.sock_read(message_len) ::::::::::::::::::\n{message}\n::::::::::::::::::::::")
                """
                message = self.sock_read(message_len) : eg.
message = b'AccEvent >>> {"event_type":32,"package_name":"gallery.photomanager.picturegalleryapp.imagegallery","time_created":1689901754575,"event":{"item_count":-1,"from_index":-1,"scroll_y":0,"scroll_x":0,"max_scroll_x":0,"max_scroll_y":0,"is_password":false,"removed_count":-1,"enabled":true,"content_description":null,"before_text":null,"event_type":"TYPE_WINDOW_STATE_CHANGED","current_item_index":-1,"source_node":{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,63,1080,63],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search_view","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[42,101,209,172],"resource_id":null,"checked":false,"text":"Gallery","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Search","children":[],"focused":false,"bounds":[604,73,731,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Camera","children":[],"focused":false,"bounds":[731,73,858,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/camera","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Scan system media library","children":[],"focused":false,"bounds":[858,73,985,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/scan","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"More options","children":[],"focused":false,"bounds":[985,73,1080,199],"resource_id":null,"checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[604,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"androidx.appcompat.widget.LinearLayoutCompat","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/toolbar","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[8,215,205,412],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/album_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[8,215,205,412],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[218,259,915,368],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/folder_name_tv","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[915,285,986,342],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/file_count_tv","checked":false,"text":"1","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[986,270,1072,356],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/more_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[3,210,1077,417],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[3,210,1077,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1077,231,1077,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1083,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[2157,231,1080,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/viewpager","checked":false,"text":null,"class":"androidx.viewpager.widget.ViewPager","scrollable":true,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":"Albums","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[98,1728,223,1779],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/largeLabel","checked":false,"text":"Albums","class":"android.widget.TextView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[98,1728,223,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[129,1668,192,1731],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[34,1647,287,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_one","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Videos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[356,1728,470,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[382,1689,445,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[287,1647,540,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_two","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Photos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[608,1728,724,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[635,1689,698,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[540,1647,793,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_three","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Settings","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[852,1728,987,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[888,1689,951,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[793,1647,1046,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_four","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[34,1647,1046,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,1647,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/bottomnavigationview","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"android:id\\/content","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/action_bar_root","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,0,1080,63],"resource_id":"android:id\\/statusBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,1794,1080,1920],"resource_id":"android:id\\/navigationBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1920],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},"package_name":"gallery.photomanager.picturegalleryapp.imagegallery","action":0,"checked":false,"text":["Gallery"],"class_name":"gallery.photomanager.picturegalleryapp.imagegallery.activity.GalleryActivity","to_index":-1,"event_time":683572567,"scrollable":false,"full_screen":true},"event_time":683572567,"root_node":{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,63,1080,63],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search_view","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[42,101,209,172],"resource_id":null,"checked":false,"text":"Gallery","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Search","children":[],"focused":false,"bounds":[604,73,731,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Camera","children":[],"focused":false,"bounds":[731,73,858,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/camera","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Scan system media library","children":[],"focused":false,"bounds":[858,73,985,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/scan","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"More options","children":[],"focused":false,"bounds":[985,73,1080,199],"resource_id":null,"checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[604,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"androidx.appcompat.widget.LinearLayoutCompat","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/toolbar","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[8,215,205,412],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/album_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[8,215,205,412],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[218,259,915,368],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/folder_name_tv","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[915,285,986,342],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/file_count_tv","checked":false,"text":"1","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[986,270,1072,356],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/more_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[3,210,1077,417],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[3,210,1077,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1077,231,1077,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1083,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[2157,231,1080,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/viewpager","checked":false,"text":null,"class":"androidx.viewpager.widget.ViewPager","scrollable":true,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":"Albums","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[98,1728,223,1779],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/largeLabel","checked":false,"text":"Albums","class":"android.widget.TextView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[98,1728,223,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[129,1668,192,1731],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[34,1647,287,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_one","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Videos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[356,1728,470,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[382,1689,445,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[287,1647,540,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_two","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Photos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[608,1728,724,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[635,1689,698,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[540,1647,793,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_three","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Settings","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[852,1728,987,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[888,1689,951,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[793,1647,1046,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_four","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[34,1647,1046,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,1647,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/bottomnavigationview","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"android:id\\/content","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/action_bar_root","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,0,1080,63],"resource_id":"android:id\\/statusBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,1794,1080,1920],"resource_id":"android:id\\/navigationBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1920],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}}'
                """
                if not isinstance(message, str):
                    message = message.decode()
                self.handle_message(message)
            print("[CONNECTION] %s is disconnected" % self.__class__.__name__)
        except Exception:
            if self.check_connectivity():
                traceback.print_exc()
                # clear self.last_acc_event
                self.logger.warning("Restarting droidbot app")
                self.last_acc_event = None
                self.disconnect()
                self.connect()

    def handle_message(self, message):
        acc_event_idx = message.find("AccEvent >>> ")
        if acc_event_idx >= 0:
            if acc_event_idx > 0:
                self.logger.warning("Invalid data before packet head: " + message[:acc_event_idx])
            body = json.loads(message[acc_event_idx + len("AccEvent >>> "):])
            self.last_acc_event = body
            return

        rotation_idx = message.find("rotation >>> ")
        if rotation_idx >= 0:
            if rotation_idx > 0:
                self.logger.warning("Invalid data before packet head: " + message[:rotation_idx])
            self.device.handle_rotation()
            return

        self.logger.warning("Unhandled message from droidbot app: " + message)
        raise DroidBotAppConnException()

    def check_connectivity(self):
        """
        check if droidbot app is connected
        :return: True for connected
        """
        return self.connected

    def disconnect(self):
        """
        disconnect telnet
        """
        self.connected = False
        if self.sock is not None:
            try:
                self.sock.close()
            except Exception as e:
                print(e)
        try:
            forward_remove_cmd = "adb -s %s forward --remove tcp:%d" % (self.device.serial, self.port)
            p = subprocess.Popen(forward_remove_cmd.split(), stderr=subprocess.PIPE, stdout=subprocess.PIPE)
            out, err = p.communicate()
        except Exception as e:
            print(e)
        self.__can_wait = False

    def __view_tree_to_list(self, view_tree, view_list):
        tree_id = len(view_list)
        view_tree['temp_id'] = tree_id

        bounds = [[-1, -1], [-1, -1]]
        bounds[0][0] = view_tree['bounds'][0]
        bounds[0][1] = view_tree['bounds'][1]
        bounds[1][0] = view_tree['bounds'][2]
        bounds[1][1] = view_tree['bounds'][3]
        width = bounds[1][0] - bounds[0][0]
        height = bounds[1][1] - bounds[0][1]
        view_tree['size'] = "%d*%d" % (width, height)
        view_tree['bounds'] = bounds

        view_list.append(view_tree)
        children_ids = []
        for child_tree in view_tree['children']:
            if self.ignore_ad and child_tree['resource_id'] is not None:
                id_word_list = self.__id_convert(child_tree['resource_id']).split('_')
                if "ad" in id_word_list or \
                   "banner" in id_word_list:
                    continue
            child_tree['parent'] = tree_id
            # # 재귀함수!!!
            self.__view_tree_to_list(child_tree, view_list)
            children_ids.append(child_tree['temp_id'])
        view_tree['children'] = children_ids

    def get_views(self):
        get_views_times = 0
        while not self.last_acc_event:
            self.logger.warning("last_acc_event is None, waiting")
            get_views_times += 1
            if get_views_times > MAX_NUM_GET_VIEWS:
                self.logger.warning("cannot get non-None last_acc_event")
                return None
            time.sleep(GET_VIEW_WAIT_TIME)

        if 'view_list' in self.last_acc_event:
            return self.last_acc_event['view_list']

        import copy
        view_tree = copy.deepcopy(self.last_acc_event['root_node'])
        # print view_tree
        if not view_tree:
            return None
        view_tree['parent'] = -1
        view_list = []
        self.__view_tree_to_list(view_tree, view_list)
        self.last_acc_event['view_list'] = view_list
        return view_list


if __name__ == "__main__":
    # message = b'AccEvent >>> {"event_type":32,"package_name":"gallery.photomanager.picturegalleryapp.imagegallery","time_created":1689901754575,"event":{"item_count":-1,"from_index":-1,"scroll_y":0,"scroll_x":0,"max_scroll_x":0,"max_scroll_y":0,"is_password":false,"removed_count":-1,"enabled":true,"content_description":null,"before_text":null,"event_type":"TYPE_WINDOW_STATE_CHANGED","current_item_index":-1,"source_node":{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,63,1080,63],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search_view","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[42,101,209,172],"resource_id":null,"checked":false,"text":"Gallery","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Search","children":[],"focused":false,"bounds":[604,73,731,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Camera","children":[],"focused":false,"bounds":[731,73,858,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/camera","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Scan system media library","children":[],"focused":false,"bounds":[858,73,985,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/scan","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"More options","children":[],"focused":false,"bounds":[985,73,1080,199],"resource_id":null,"checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[604,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"androidx.appcompat.widget.LinearLayoutCompat","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/toolbar","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[8,215,205,412],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/album_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[8,215,205,412],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[218,259,915,368],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/folder_name_tv","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[915,285,986,342],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/file_count_tv","checked":false,"text":"1","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[986,270,1072,356],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/more_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[3,210,1077,417],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[3,210,1077,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1077,231,1077,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1083,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[2157,231,1080,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/viewpager","checked":false,"text":null,"class":"androidx.viewpager.widget.ViewPager","scrollable":true,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":"Albums","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[98,1728,223,1779],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/largeLabel","checked":false,"text":"Albums","class":"android.widget.TextView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[98,1728,223,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[129,1668,192,1731],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[34,1647,287,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_one","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Videos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[356,1728,470,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[382,1689,445,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[287,1647,540,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_two","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Photos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[608,1728,724,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[635,1689,698,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[540,1647,793,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_three","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Settings","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[852,1728,987,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[888,1689,951,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[793,1647,1046,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_four","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[34,1647,1046,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,1647,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/bottomnavigationview","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"android:id\\/content","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/action_bar_root","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,0,1080,63],"resource_id":"android:id\\/statusBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,1794,1080,1920],"resource_id":"android:id\\/navigationBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1920],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},"package_name":"gallery.photomanager.picturegalleryapp.imagegallery","action":0,"checked":false,"text":["Gallery"],"class_name":"gallery.photomanager.picturegalleryapp.imagegallery.activity.GalleryActivity","to_index":-1,"event_time":683572567,"scrollable":false,"full_screen":true},"event_time":683572567,"root_node":{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":3,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,63,1080,63],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search_view","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[42,101,209,172],"resource_id":null,"checked":false,"text":"Gallery","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Search","children":[],"focused":false,"bounds":[604,73,731,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/search","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Camera","children":[],"focused":false,"bounds":[731,73,858,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/camera","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Scan system media library","children":[],"focused":false,"bounds":[858,73,985,199],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/scan","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"More options","children":[],"focused":false,"bounds":[985,73,1080,199],"resource_id":null,"checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[604,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"androidx.appcompat.widget.LinearLayoutCompat","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/toolbar","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,63,1080,210],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[8,215,205,412],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/album_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[8,215,205,412],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[218,259,915,368],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/folder_name_tv","checked":false,"text":null,"class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[915,285,986,342],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/file_count_tv","checked":false,"text":"1","class":"android.widget.TextView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[986,270,1072,356],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/more_iv","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[3,210,1077,417],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":true}],"focused":false,"bounds":[3,210,1077,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1077,231,1077,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[1083,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/recycler_view","checked":false,"text":null,"class":"androidx.recyclerview.widget.RecyclerView","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":false,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[2157,231,1080,1605],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/fast_scroller","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/swipe_refresh_layout","checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[1080,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,210,1080,1647],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/viewpager","checked":false,"text":null,"class":"androidx.viewpager.widget.ViewPager","scrollable":true,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":4,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":false,"is_password":false,"focusable":true,"enabled":true,"content_description":"Albums","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":1,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[98,1728,223,1779],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/largeLabel","checked":false,"text":"Albums","class":"android.widget.TextView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[98,1728,223,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[129,1668,192,1731],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":true,"long_clickable":false}],"focused":false,"bounds":[34,1647,287,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_one","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":true,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Videos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[356,1728,470,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[382,1689,445,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[287,1647,540,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_two","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Photos","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[608,1728,724,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[635,1689,698,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[540,1647,793,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_three","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":2,"editable":false,"clickable":true,"is_password":false,"focusable":true,"enabled":true,"content_description":"Settings","children":[{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[852,1728,987,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[888,1689,951,1752],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/icon","checked":false,"text":null,"class":"android.widget.ImageView","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[793,1647,1046,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/tab_four","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[34,1647,1046,1794],"resource_id":null,"checked":false,"text":null,"class":"android.view.ViewGroup","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,1647,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/bottomnavigationview","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/background","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"android:id\\/content","checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":"gallery.photomanager.picturegalleryapp.imagegallery:id\\/action_bar_root","checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1794],"resource_id":null,"checked":false,"text":null,"class":"android.widget.LinearLayout","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,0,1080,63],"resource_id":"android:id\\/statusBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false},{"package":"gallery.photomanager.picturegalleryapp.imagegallery","visible":true,"checkable":false,"child_count":0,"editable":false,"clickable":false,"is_password":false,"focusable":false,"enabled":true,"content_description":null,"children":[],"focused":false,"bounds":[0,1794,1080,1920],"resource_id":"android:id\\/navigationBarBackground","checked":false,"text":null,"class":"android.view.View","scrollable":false,"selected":false,"long_clickable":false}],"focused":false,"bounds":[0,0,1080,1920],"resource_id":null,"checked":false,"text":null,"class":"android.widget.FrameLayout","scrollable":false,"selected":false,"long_clickable":false}}'
    # droid_conn = DroidBotAppConn()
    #
    # if not isinstance(message, str):
    #     message = message.decode()
    # droid_conn.handle_message(message)
    droidbot_app_conn = DroidBotAppConn()
    droidbot_app_conn.set_up()
    droidbot_app_conn.connect()
